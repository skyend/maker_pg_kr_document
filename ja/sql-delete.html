<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>DELETE</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version "><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.1.4文書"
HREF="index.html"><LINK
REL="UP"
TITLE="SQLコマンド"
HREF="sql-commands.html"><LINK
REL="PREVIOUS"
TITLE="DECLARE"
HREF="sql-declare.html"><LINK
REL="NEXT"
TITLE="DISCARD"
HREF="sql-discard.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=euc-jp"><META
NAME="creation"
CONTENT="2012-06-16T03:12:10"></HEAD
><BODY
CLASS="REFENTRY"
><script type="text/javascript">
var mod_layout = 'test';
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-50659-6");
pageTracker._trackPageview();
</script>
<style>
body{margin:0;}
#lay_body{margin:8px;}
#lay_header{margin:0 0 4px 0;border:0;padding:0;}
#lay_header .b1{border-bottom:#cef solid 1px;}
#lay_header .b2{border-bottom:#8df solid 1px;}
#lay_header .b3{border-bottom:#4bf solid 1px;padding:5px 5px 3px 5px;background:#0af;text-align:center;color:#fff;}
#lay_header a{text-decoration:none;color:#fff;font-weight:bold;}
#lay_header a:hover{text-decoration:underline;}
</style>
<div id="lay_header"><div class="b1"><div class="b2"><div class="b3">
<a href="http://lets.postgresql.jp/" target="_blank">PostgreSQLポータルサイト ＜Let's Postgres＞ http://lets.postgresql.jp/</a><br>
入門から運用、チューニングノウハウ、新機能の解説など、幅広い内容の技術解説記事をお読みいただけます。
</div></div></div></div>
<div id="lay_body">
<DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.1.4文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="DECLARE"
HREF="sql-declare.html"
ACCESSKEY="P"
>&#21069;&#12398;&#12506;&#12540;&#12472;</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="DECLARE"
HREF="sql-declare.html"
>&#24059;&#25147;&#12375;</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="top"
><A
TITLE="DISCARD"
HREF="sql-discard.html"
>&#26089;&#36865;&#12426;</A
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="top"
><A
TITLE="DISCARD"
HREF="sql-discard.html"
ACCESSKEY="N"
>&#27425;&#12398;&#12506;&#12540;&#12472;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="SQL-DELETE"
></A
>DELETE</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN69735"
></A
><H2
>&#21517;&#21069;</H2
>DELETE&nbsp;--&nbsp;テーブルから行を削除する</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN69740"
></A
><H2
>&#27010;&#35201;</H2
><PRE
CLASS="SYNOPSIS"
>[ WITH [ RECURSIVE ] <TT
CLASS="REPLACEABLE"
><I
>with_query</I
></TT
> [, ...] ]
DELETE FROM [ ONLY ] <TT
CLASS="REPLACEABLE"
><I
>table</I
></TT
> [ [ AS ] <TT
CLASS="REPLACEABLE"
><I
>alias</I
></TT
> ]
    [ USING <TT
CLASS="REPLACEABLE"
><I
>using_list</I
></TT
> ]
    [ WHERE <TT
CLASS="REPLACEABLE"
><I
>condition</I
></TT
> | WHERE CURRENT OF <TT
CLASS="REPLACEABLE"
><I
>cursor_name</I
></TT
> ]
    [ RETURNING * | <TT
CLASS="REPLACEABLE"
><I
>output_expression</I
></TT
> [ [ AS ] <TT
CLASS="REPLACEABLE"
><I
>output_name</I
></TT
> ] [, ...] ]</PRE
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN69750"
></A
><H2
>説明</H2
><P
><TT
CLASS="COMMAND"
>DELETE</TT
>は、指定したテーブルから<TT
CLASS="LITERAL"
>WHERE</TT
>句を満たす行を削除します。
<TT
CLASS="LITERAL"
>WHERE</TT
>がない場合、指定したテーブルの全ての行を削除することになります。
この結果、そのテーブルは存在するが中身が空のテーブルになります。
  </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>&#12486;&#12451;&#12483;&#12503;: </B
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>による拡張である<A
HREF="sql-truncate.html"
>TRUNCATE</A
>は、より高速に、テーブルから全ての行を削除する仕組みを持っています。
    </P
></BLOCKQUOTE
></DIV
><P
>デフォルトでは、<TT
CLASS="COMMAND"
>DELETE</TT
>は指定されたテーブルおよびその全ての子テーブルの行を削除します。
指定されたテーブルのみを削除したい場合は、<TT
CLASS="LITERAL"
>ONLY</TT
>句を使用してください。
  </P
><P
>データベース内のほかのテーブルに含まれる情報を用いてテーブル内の行を削除する方法には、副問い合わせと<TT
CLASS="LITERAL"
>USING</TT
>句で追加テーブルを指定する方法という2つがあります。
どちらの技法が適切かはその状況によります。
  </P
><P
>省略可能な<TT
CLASS="LITERAL"
>RETURNING</TT
>句により、<TT
CLASS="COMMAND"
>DELETE</TT
>は実際に削除された各行に基づいて計算された値を返すようになります。
そのテーブルの列、<TT
CLASS="LITERAL"
>USING</TT
>で指定された他のテーブルの列、あるいは、その両方を使用した式を計算することができます。
<TT
CLASS="LITERAL"
>RETURNING</TT
>リストの構文は<TT
CLASS="COMMAND"
>SELECT</TT
>の出力リストと同一です。
  </P
><P
>削除を実行するには、そのテーブルの<TT
CLASS="LITERAL"
>DELETE</TT
>権限が必要です。
また、<TT
CLASS="LITERAL"
>USING</TT
>句内のテーブルに対する<TT
CLASS="LITERAL"
>SELECT</TT
>権限、および、<TT
CLASS="REPLACEABLE"
><I
>condition</I
></TT
>で使用する値を読み取るために、その値が含まれるテーブルに対する<TT
CLASS="LITERAL"
>SELECT</TT
>権限も必要です。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN69777"
></A
><H2
>パラメータ</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="REPLACEABLE"
><I
>with_query</I
></TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>WITH</TT
>句により<TT
CLASS="COMMAND"
>DELETE</TT
>問い合わせ内で名前で参照可能な１つ以上の副問い合わせを指定することができます。
<A
HREF="queries-with.html"
>&#38917;7.8</A
>と<A
HREF="sql-select.html"
>SELECT</A
>を参照してください。
     </P
></DD
><DT
><TT
CLASS="LITERAL"
>ONLY</TT
></DT
><DD
><P
>指定された場合、指名したテーブルのみから行を削除します。
指定されなかった場合、指名したテーブルを継承するテーブルも処理されます。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>table</I
></TT
></DT
><DD
><P
>	既存のテーブル名です（スキーマ修飾名も可）。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>alias</I
></TT
></DT
><DD
><P
>対象テーブルの代理名称です。
別名が与えられた場合、実際のテーブル名は完全に隠蔽されます。
たとえば、<TT
CLASS="LITERAL"
>DELETE FROM foo AS f</TT
>を考えます。
この<TT
CLASS="COMMAND"
>DELETE</TT
>文の残りの部分ではこのテーブルを<TT
CLASS="LITERAL"
>foo</TT
>ではなく<TT
CLASS="LITERAL"
>f</TT
>として参照しなければなりません。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>using_list</I
></TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>WHERE</TT
>条件内に他のテーブルの列を許可するための、テーブル式のリストです。
これは、<TT
CLASS="COMMAND"
>SELECT</TT
>文の<A
HREF="sql-select.html#SQL-FROM"
><I
><I
>FROM</I
>句</I
></A
>において指定できるテーブルのリストと同様です。
例えば、テーブル名の別名も指定することができます。
自己結合を設定する目的以外では<TT
CLASS="REPLACEABLE"
><I
>using_list</I
></TT
>に対象のテーブルを繰り返さないでください。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>condition</I
></TT
></DT
><DD
><P
><TT
CLASS="TYPE"
>boolean</TT
>型の値を返す式です。
この式が<TT
CLASS="LITERAL"
>true</TT
>を返す行のみが削除されます。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>cursor_name</I
></TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>WHERE CURRENT OF</TT
>条件で使用されるカーソルの名前です。
削除対象の行は、そのカーソルからもっとも最近に取り出される行です。
カーソルは、<TT
CLASS="COMMAND"
>DELETE</TT
>の対象テーブルに対するグループ化のない問い合わせでなければなりません。
<TT
CLASS="LITERAL"
>WHERE CURRENT OF</TT
>を論理条件といっしょに指定することはできません。
<TT
CLASS="LITERAL"
>WHERE CURRENT OF</TT
>付きのカーソルの使用に関する情報については<A
HREF="sql-declare.html"
>DECLARE</A
>を参照してください。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>output_expression</I
></TT
></DT
><DD
><P
>各行を削除した後に計算され、<TT
CLASS="COMMAND"
>DELETE</TT
>によって返される式です。
この式には、<TT
CLASS="REPLACEABLE"
><I
>table</I
></TT
>または<TT
CLASS="LITERAL"
>USING</TT
>で指定したテーブル（複数可）の任意の列名を使用することができます。
すべての列を返す場合は<TT
CLASS="LITERAL"
>*</TT
>と記載してください。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>output_name</I
></TT
></DT
><DD
><P
>返される列で使用される名前です。
     </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN69848"
></A
><H2
>出力</H2
><P
>正常に終了した場合、<TT
CLASS="COMMAND"
>DELETE</TT
>コマンドは以下の形式のコマンドタグを返します。
</P><PRE
CLASS="SCREEN"
>DELETE <TT
CLASS="REPLACEABLE"
><I
>count</I
></TT
></PRE
><P>
<TT
CLASS="REPLACEABLE"
><I
>count</I
></TT
>は削除した行数です。
<TT
CLASS="REPLACEABLE"
><I
>count</I
></TT
>が0の場合、<TT
CLASS="REPLACEABLE"
><I
>condition</I
></TT
>を満たす行が存在しなかったことを示します
（これはエラーとはみなされません）。
  </P
><P
><TT
CLASS="COMMAND"
>DELETE</TT
>コマンドが<TT
CLASS="LITERAL"
>RETURNING</TT
>句を持つ場合、その結果は、<TT
CLASS="LITERAL"
>RETURNING</TT
>リストで定義した列と値を持ち、そのコマンドで削除された行全体に対して計算を行う<TT
CLASS="COMMAND"
>SELECT</TT
>文の結果と似たものになるでしょう。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN69862"
></A
><H2
>注釈</H2
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>では、<TT
CLASS="LITERAL"
>USING</TT
>句で他のテーブルを指定することで、<TT
CLASS="LITERAL"
>WHERE</TT
>条件内で他のテーブルを参照することができます。
例えば、指定したプロデューサが製作した全ての映画を削除する時は、次のようなコマンドを実行します。
</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM films USING producers
  WHERE producer_id = producers.id AND producers.name = 'foo';</PRE
><P>
ここでは、<TT
CLASS="STRUCTNAME"
>films</TT
>と<TT
CLASS="STRUCTNAME"
>producers</TT
>とを結合して、<TT
CLASS="STRUCTNAME"
>films</TT
>行に削除用の印を付けるという作業を行っています。
この構文は標準に従ったものではありません。
より標準的な方法は以下の通りです。
</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM films
  WHERE producer_id IN (SELECT id FROM producers WHERE name = 'foo');</PRE
><P>
副問い合わせ形式より結合形式の方が書き易く、実行が速くなることがあります。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN69873"
></A
><H2
>例</H2
><P
>filmsテーブルからmusical以外を全て削除します。

</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM films WHERE kind &lt;&gt; 'Musical';</PRE
><P>
  </P
><P
><TT
CLASS="LITERAL"
>films</TT
>テーブルを空にします。
</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM films;</PRE
><P>
  </P
><P
>完了した作業（statusがDONE）を削除し、削除された行を完全に返します。
</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM tasks WHERE status = 'DONE' RETURNING *;</PRE
><P>
  </P
><P
><TT
CLASS="STRUCTNAME"
>tasks</TT
>において<TT
CLASS="LITERAL"
>c_tasks</TT
>カーソルが現在位置している行を削除します。
</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM tasks WHERE CURRENT OF c_tasks;</PRE
><P></P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN69886"
></A
><H2
>互換性</H2
><P
>このコマンドは標準SQLに準拠しています。
ただし、<TT
CLASS="LITERAL"
>USING</TT
>句と<TT
CLASS="LITERAL"
>RETURNING</TT
>句は<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の拡張です。
<TT
CLASS="COMMAND"
>DELETE</TT
>で<TT
CLASS="LITERAL"
>WITH</TT
>が使用可能であることも同様に拡張です。
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="sql-declare.html"
ACCESSKEY="P"
>&#21069;&#12398;&#12506;&#12540;&#12472;</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>&#12507;&#12540;&#12512;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sql-discard.html"
ACCESSKEY="N"
>&#27425;&#12398;&#12506;&#12540;&#12472;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>DECLARE</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="sql-commands.html"
ACCESSKEY="U"
>&#19978;&#12395;&#25147;&#12427;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>DISCARD</TD
></TR
></TABLE
></DIV
></BODY
></HTML
></div>
